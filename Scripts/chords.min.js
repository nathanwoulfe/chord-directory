var app=angular.module("chords-app",["underscore","ui.bootstrap"]);var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._});app.factory("dataFactory",function(e){return{get:function(t){return e.get(t).then(function(e){var t=e.data.chords;for(var n=0;n<t.length;n++){for(var r=0;r<t[n].finger.length;r++){t[n].finger[r]=parseInt(t[n].finger[r],10)}}return e.data.chords})}}});app.filter("parseMute",function(){return function(e){if(e===-2){return"x"}return e}});app.controller("ChordsCtrl",function(e,t,n,r){r.get("./chords.json").then(function(t){e.chords=t;e.filteredChords=e.chords});e.getTimes=function(e){return new Array(e)};e.tunings=[{n:"Standard",v:[0,0,0,0,0,0]},{n:"Eb",v:[1,1,1,1,1,1]},{n:"D",v:[2,2,2,2,2,2]},{n:"Drop D",v:[0,0,0,0,0,2]},{n:"Drop Db",v:[1,1,1,1,1,3]},{n:"Drop C",v:[2,2,2,2,2,4]},{n:"Drop B",v:[3,3,3,3,3,5]},{n:"Drop Bb",v:[4,4,4,4,4,6]},{n:"Drop A",v:[5,5,5,5,5,7]},{n:"Drop Ab",v:[5,5,5,5,5,7]},{n:"Drop G",v:[6,6,6,6,6,8]},{n:"D standard",v:[2,2,2,2,2,7]},{n:"Open A",v:[0,1,2,1,0,0]},{n:"Open A (slide)",v:[0,-2,-2,-2,0,0]},{n:"Open B",v:[1,0,1,3,3,5]},{n:"Open C",v:[0,-1,0,2,2,4]},{n:"Open D",v:[2,2,1,0,2,2]},{n:"Open E",v:[0,0,-1,-2,-2,0]},{n:"Open F",v:[4,2,2,2,4,4]},{n:"Open G",v:[2,0,0,0,2,2]},{n:"Dad-Gad",v:[2,2,0,0,0,2]},{n:"Dad-Dad",v:[2,2,5,0,0,2]}];e.setCell=function(t,r){e.active=true;e.validNotes=[[],[],[],[],[],[]];if(e.selectedNotes[r]!=-1){e.reset()}e.selectedNotes[r]=t;e.filteredChords=n.filter(e.filteredChords,function(n){return parseInt(n.finger[e.stringCount-r-1],10)===t});for(var i=0;i<e.filteredChords.length;i++){for(var s=0;s<e.filteredChords[i].finger.length;s++){var o=parseInt(e.filteredChords[i].finger[s],10);if(n.indexOf(e.validNotes[e.stringCount-s-1],o)===-1){e.validNotes[e.stringCount-s-1].push(o)}}}e.checkValidNotesLength()};e.retune=function(t){e.prevTuning=e.currTuning;e.currTuning=t;for(var n=0;n<e.validNotes.length;n++){for(var r=0;r<e.validNotes[n].length;r++){var i=parseInt(e.validNotes[n][r]);if(i>=0){var s=i-e.prevTuning.v[n]+e.currTuning.v[n];e.validNotes[n][r]=s;e.selectedNotes[n]=s;e.filteredChords[0].finger[e.stringCount-n-1]=s}}}};e.setChord=function(t){e.active=true;e.validNotes=[[],[],[],[],[],[]];e.filteredChords=[t];for(var n=0;n<t.finger.length;n++){var r=parseInt(t.finger[n],10);e.selectedNotes[n]=r;e.validNotes[n][0]=r}e.selectedNotes.reverse();e.validNotes.reverse();document.body.className="resulted"};e.isValid=function(t,r){if(e.selectedNotes.length>0){if(n.indexOf(e.validNotes[r],t)!=-1){return true}return false}return false};e.isSelected=function(t,n){if(e.selectedNotes.length>0){for(var r=0;r<e.selectedNotes.length;r++){if(e.selectedNotes[r]===t&&r===n){return true}}return false}return false};e.isMuted=function(t){if(e.selectedNotes.length>0){if(e.selectedNotes[t]===-2){return true}return false}};e.isOpen=function(t){if(e.selectedNotes.length>0){if(e.selectedNotes[t]===0){return true}return false}};e.checkValidNotesLength=function(){var t=0;for(var n=0;n<e.validNotes.length;n++){if(e.validNotes[n].length===1){e.isSelected(e.validNotes[n][0],n);t++}}if(t===e.selectedNotes.length){for(var n=0;n<e.validNotes.length;n++){e.selectedNotes[n]=e.validNotes[n][0]}document.body.className="resulted"}};e.startsWith=function(e,t){return e.substr(0,t.length).toLowerCase()==t.toLowerCase()};e.reset=function(){e.active=false;document.body.className="";e.stringCount=6;e.selectedChord=null;e.currTuning=e.tunings[0];e.prevTuning=e.tunings[0];e.tuning=e.tunings[0];e.validNotes=[[],[],[],[],[],[]];e.selectedNotes=[-1,-1,-1,-1,-1,-1];e.filteredChords=e.chords};e.reset()})